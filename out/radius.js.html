<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: radius.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: radius.js</h1>

    


    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>var map = null; 
var geocoder = null; 
var cityMarker = null; 
var cityCircle = null; 
var startValue = 5;

/**
 * Updates the map center based on the address in #address
 */
function codeAddress() {
    var address = document.getElementById('address').value;
    geocoder.geocode( { 'address': address}, function(results, status) {
        if (status == google.maps.GeocoderStatus.OK) {
            map.setCenter(results[0].geometry.location);
            cityMarker.setPosition(map.getCenter());
            updateCoordsOnPage(map.getCenter());
        } else {
            alert('Geocode was not successful for the following reason: ' + status);
        }
    });
}

/**
 * Updates the hidden fields with the current center lat and lng
 * @param {pos} pos - The map's center position element. 
 */
function updateCoordsOnPage(pos) {
    var lat = document.getElementById('question_latitude');
    var lng = document.getElementById('question_longitude');
    lat.innerHTML = Math.round(pos.lat() * 10) / 10;
    lng.innerHTML = Math.round(pos.lng() * 10) / 10;
}

function init() {
    geocoder = new google.maps.Geocoder();
    var mapDiv = document.getElementById('map-canvas');
    if (mapDiv != null) {
        map = new google.maps.Map(mapDiv, {
            center: new google.maps.LatLng(37.424105999999, -122.1660756),
            zoom: 10, 
            mapTypeId: google.maps.MapTypeId.ROADMAP
        });
        cityMarker = new google.maps.Marker({
            position: map.getCenter(), 
            map: map,
            draggable: true, 
            visible: true});
        cityCircle = new google.maps.Circle({
            strokeOpacity: 0.8,
            strokeWeight: 2,
            fillOpacity: 0.15,
            map: map,
            center: map.getCenter(),
            radius: milesToMeters(startValue),
            visible: true
        });
        cityCircle.bindTo('center', cityMarker, 'position');
        updateCoordsOnPage(map.getCenter());
        google.maps.event.addListener(cityMarker, 'drag', function() { updateCoordsOnPage(cityMarker.getPosition()); } );
    }
}

function milesToMeters(miles) {
    return miles * 1609.3;
}

$(function() {
    $( "#slider-range-max" ).slider({
        range: "max",
        min: 1,
        max: 20,
        value: startValue,
        slide: function( event, ui ) {
            $( "#question_radius" ).val( ui.value );
            updateRadius(ui.value);
        }
    });
    $( "#question_radius" ).val( $( "#slider-range-max" ).slider( "value" ) );
});

function updateRadius(rad) {
    cityCircle.setRadius(milesToMeters(rad));
}

google.maps.event.addDomListener(window, 'load', init);
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Index</a></h2><h3>Global</h3><ul><li><a href="global.html#codeAddress">codeAddress</a></li><li><a href="global.html#updateCoordsOnPage">updateCoordsOnPage</a></li></ul>
</nav>

<br clear="both">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.3.0-dev</a> on Mon Mar 10 2014 11:43:36 GMT-0700 (PDT)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
